---
title: Kubernetes 安装实践
date: 2020-12-26
tags:
 - Kubernetes

categories:
 - 实用技能
---


### 关闭 Firewall 和 SELinux

```
$ systemctl disable firewalld
$ systemctl stop firewalld

```

```
$ setenforce 0
setenforce: SELinux is disabled
```

### 设置 REPO

```
[kubernetes]
name=Kubernetes Repository
baseurl=http://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/
enabled=1
gpgcheck=0

```

### 安装 Kubernetes 三件套

```
$  yum install kubelet kubeadm kubectl --disableexcludes=kubernetes -y 

Installed:
  conntrack-tools-1.4.4-10.el8.x86_64         cri-tools-1.13.0-0.x86_64                    kubeadm-1.20.1-0.x86_64                
  kubectl-1.20.1-0.x86_64                     kubelet-1.20.1-0.x86_64                      kubernetes-cni-0.8.7-0.x86_64          
  libnetfilter_cthelper-1.0.0-15.el8.x86_64   libnetfilter_cttimeout-1.0.0-11.el8.x86_64   libnetfilter_queue-1.0.4-3.el8.x86_64  
  socat-1.7.3.3-2.el8.x86_64   
```


### 安装 Docker



### 启动 Docker 和 Kubelet

```
systemctl enable docker && systemctl enable kubelet
systemctl start docker && systemctl start kubelet
```

### 无法拉取镜像

```

failed to pull image "k8s.gcr.io/kube-apiserver:v1.20.0": output: Error response from daemon: Get https://k8s.gcr.io/v2/: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers)
, error: exit status 1
To see the stack trace of this error execute with --v=5 or higher
```

<Vssue :title="$title" />

